<style>
    #content-nav-tabs > .active > a {
        color: #cf4646 !important;
    }
    #content-nav-tabs > li > a {
        color: #333;
    }
    .submit-work {
        width: 60px;
        height: 24px;
        text-align: center;
        line-height: 24px;
        padding: 0;
        font-size: 12px;
        margin: -4px 0 0 -2px;
    }
    .submit-work:hover {
        background: #cf4646;
        color: #fff;
        border: none;
    }
    #pubHomeWork {
        display: none;
    }
    #pubHomeWorkInf {
        width: 400px;
        height: 400px;
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        right: 0;
        margin: auto;
        border-radius: 6px;
    }
    .form-upload {
        width: 360px;
        padding: 19px 29px 29px;
        position: absolute;
        left: 50%;
        top: 48%;
        margin: -125px -180px;
        background-color: #fff;
        border: 1px solid #e5e5e5;
        -webkit-border-radius: 5px;
        -moz-border-radius: 5px;
        border-radius: 5px;
        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.05);
        -moz-box-shadow: 0 1px 2px rgba(0,0,0,.05);
        box-shadow: 0 1px 2px rgba(0,0,0,.05);
    }
    .form-upload-heading {
        color: #cf4646;
    }
    .form-upload .form-upload-heading,
    .form-upload .checkbox {
        margin-bottom: 10px;
    }
    .form-upload input[type="text"],
    .form-upload input[type="password"] {
        border: 1px solid #e5e5e5;
        border-radius: 4px;
        font-size: 14px;
        height: auto;
        margin-bottom: 15px;
        padding: 7px 9px;
    }
    .upload-btn {
        background: #cf4646;
        border: none;
        font-size: 14px;
    }
    .upload-btn:hover {
        background: red;
    }
    .pub-container {
        display: none;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1;
        position: absolute;
        left: 0;
        top: 0;
    }
    textarea {
        min-width: 100%;
        max-width: 100%;
        display: block;
    }
</style>
<compont>
    <div class="pub-container">
        <form class="form-upload">
            <input type="text" class="input-block-level" id="hwTitle" placeholder="作业标题">
            <input id="deadline" type="text" name="" placeholder="截止日期">
            <textarea placeholder="作业描述"></textarea>
            <input id="pubHomeWork" type="file" name="">
            <button id="uploadBtn" class="btn btn-large btn-primary upload-btn" type="submit">发布</button>
      </form>
    </div>
    <div class="tabbable" id="tabs-876424">
        <ul class="nav nav-tabs" id="content-nav-tabs">
            <li class="active">
                <a href="#panel-386054" data-toggle="tab">未截止</a>
            </li>
            <li>
                <a href="#panel-812330" data-toggle="tab">已截止</a>
            </li>
            <li style="float: right; margin-right: 20px">   
                <button type="button" class="btn btn-default pub-homework">发布作业</button>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="panel-386054">
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                部门
                            </th>
                            <th>
                                作业标题
                            </th>
                            <th>
                                作业说明
                            </th>
                            <th>
                                发布日期
                            </th>
                            <th>
                                截止日期
                            </th>
                            <th>
                                操作
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#nhwList}}
                        <tr class="warning">
                            <td>
                                {{ b_id }}
                            </td>
                            <td>
                                {{ hw_title }}
                            </td>
                            <td>
                                {{ hw_detail }}
                            </td>
                            <td>
                                {{ hw_publish }}
                            </td>
                            <td>
                                {{ hw_deadline }}
                            </td>
                            <td>
                                <a type="button" href="/user/teacher/watch_homework?id={{id}}" class="btn btn-default submit-work preview">查看</a>
                                <button data-id="{{ id }}" type="button" class="btn btn-default submit-work delete">删除</button>
                            </td>
                        </tr>
                        {{/nhwList}}
                    </tbody>
                </table>
                <!-- <div class="pagination">
                    <ul>
                        <li>
                            <a href="#">上一页</a>
                        </li>
                        <li>
                            <a href="#">1</a>
                        </li>
                        <li>
                            <a href="#">2</a>
                        </li>
                        <li>
                            <a href="#">3</a>
                        </li>
                        <li>
                            <a href="#">4</a>
                        </li>
                        <li>
                            <a href="#">5</a>
                        </li>
                        <li>
                            <a href="#">下一页</a>
                        </li>
                    </ul>
                </div> -->
            </div>
            <div class="tab-pane" id="panel-812330">
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                部门
                            </th>
                            <th>
                                作业标题
                            </th>
                            <th>
                                作业说明
                            </th>
                            <th>
                                发布日期
                            </th>
                            <th>
                                截止日期
                            </th>
                            <th>
                                操作
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {{#yhwList}}
                        <tr class="error">
                            <td>
                                {{ b_id }}
                            </td>
                            <td>
                                {{ hw_title }}
                            </td>
                            <td>
                                {{ hw_detail }}
                            </td>
                            <td>
                                {{ hw_publish }}
                            </td>
                            <td>
                                {{ hw_deadline }}
                            </td>
                            <td>
                                <a type="button" href="/user/teacher/watch_homework?id={{id}}" class="btn btn-default submit-work preview">查看</a>
                                <button data-id="{{ id }}" type="button" class="btn btn-default submit-work delete">删除</button>
                            </td>
                        </tr>
                        {{/yhwList}}
                    </tbody>
                </table>
                <!-- <div class="pagination">
                    <ul>
                        <li>
                            <a href="#">上一页</a>
                        </li>
                        <li>
                            <a href="#">1</a>
                        </li>
                        <li>
                            <a href="#">2</a>
                        </li>
                        <li>
                            <a href="#">3</a>
                        </li>
                        <li>
                            <a href="#">4</a>
                        </li>
                        <li>
                            <a href="#">5</a>
                        </li>
                        <li>
                            <a href="#">下一页</a>
                        </li>
                    </ul>
                </div> -->
            </div>
        </div>
    </div>
    <script>
        app.capture(document.getElementsByClassName('preview'));
        $('.pub-container').on('click', function() {
            $(this).hide()
        });
        $('.pub-homework').on('click', function() {
            $('.pub-container').show();
        });
        $('.form-upload').on('click', function(e) {
            e.stopPropagation();
        })
        $('#uploadBtn').on('click', function(e) {
            e.preventDefault();
            $.post('/home/index/route?role=manager&action=publishWork', {
                id: JSON.parse(localStorage.getItem('userInf')).managerInfo.id,
                title: $('#hwTitle').val(),
                expain: $('textarea').val(),
                time: $('#deadline').val(), 
            }).done(function(res) {
                if (res.status === 200) {
                    alert('发布成功');
                } else {
                    alert('发布失败');
                }
                window.location.reload()
            }).fail(function(res) {});
        })
    </script>
</compont>